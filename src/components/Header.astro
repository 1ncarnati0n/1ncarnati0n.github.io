---
import DarkModeToggle from "./DarkModeToggle";
import SearchOverlay from "./SearchOverlay";

const pathname = Astro.url.pathname;
const navLinks = [
  { name: "Projects", href: "/projects/" },
  { name: "Blog", href: "/posts/" },
  { name: "Tags", href: "/tags/" },
];
---

<header class="site-header">
  <div class="container">
    <a href="/" class="site-logo">1ncarnati0n</a>
    <nav class="site-nav">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class={pathname.startsWith(link.href) ? "active" : ""}
          >
            {link.name}
          </a>
        ))
      }
      <button
        id="search-trigger"
        aria-label="검색 (Cmd+K)"
        class="search-btn"
      >
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" />
        </svg>
      </button>
      <DarkModeToggle client:load />
    </nav>
  </div>
</header>

<SearchOverlay client:load />

<style>
  .search-btn {
    background: none;
    border: 1px solid color-mix(in srgb, var(--gray) 30%, transparent);
    border-radius: var(--radius-sm);
    padding: 6px 8px;
    cursor: pointer;
    color: var(--text);
    display: flex;
    align-items: center;
    transition: border-color var(--transition);
  }
  .search-btn:hover {
    border-color: var(--gray);
  }
</style>

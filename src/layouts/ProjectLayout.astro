---
import BaseLayout from "./BaseLayout.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";
import TagList from "../components/TagList.astro";
import { formatDate } from "../lib/content-utils";

interface Props {
  title: string;
  date?: Date;
  category?: string;
  location?: string;
  description?: string;
  tags?: string[];
  thumbnail?: string;
}

const { title, date, category, location, description, tags = [], thumbnail } = Astro.props;
---

<BaseLayout title={title} description={description} ogImage={thumbnail}>
  <article class="project-page container">
    <Breadcrumbs
      items={[
        { label: "Projects", href: "/projects/" },
        { label: title },
      ]}
    />

    <header class="project-header">
      <h1>{title}</h1>
      <div class="project-meta">
        {category && <span class="meta-category">{category}</span>}
        {date && <time datetime={date.toISOString()}>{formatDate(date)}</time>}
        {location && <span>{location}</span>}
      </div>
      {description && <p class="project-desc">{description}</p>}
      <TagList tags={tags} />
    </header>

    <div class="prose project-content">
      <slot />
    </div>
  </article>
</BaseLayout>

<style>
  .project-page {
    padding-top: var(--spacing-xl);
    padding-bottom: var(--spacing-2xl);
    max-width: 900px;
  }
  .project-header {
    margin-bottom: var(--spacing-xl);
  }
  .project-header h1 {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
  }
  .project-meta {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    font-size: 0.85rem;
    color: var(--gray);
    font-family: var(--font-header);
    margin-bottom: var(--spacing-md);
  }
  .meta-category {
    background: color-mix(in srgb, var(--tertiary) 20%, transparent);
    padding: 2px 10px;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
  }
  .project-desc {
    color: var(--gray);
    font-size: 1rem;
    margin-bottom: var(--spacing-md);
  }
  .project-content :global(img) {
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
  }
</style>
